\chapter{Object and Event Selection}

\section{Triggers}
The topology and basic kinematics of the \hzg process guide the choice of triggers used in this analysis. As this is a three body
decay, the \pT of the photon tends to be less than in other channels like \hgg. Consequently, the CMS photon trigger \pT thresholds 
are too great to make them viable options. Instead, we trigger on the leptons arising from the decay of the Z boson, which tend 
to have larger \pT. The best approach to maximize signal efficiency is to use the double lepton triggers. The double muon trigger 
has \pT thresholds of 17 and 8 GeV, and the double electron trigger has thresholds of 23 and 12 GeV. These are the lowest 
unprescaled double lepton triggers generally available for CMS Run 2 analysis. Events passing both the double muon and 
double electron triggers are treated as double muon events.

The triggers are applied to both data and simulation. Trigger efficiencies and scale factors are measured using the 
simulation samples corresponding to each data-taking year. These measurements use a tag and probe method [CITE]. The tag and probe  method
takes advantage of the high purity of $Z \rightarrow \ell^{+}\ell{-}$ events near the Z mass peak. One lepton functions as the 
tag, and satisfies a set of tight trigger, identification, isolation, \pT requirements. The second lepton, the probe, must pass a looser selection and is used to measure the efficiency in question. 
Using this approach, trigger efficiencies for each leg of a given 
double lepton trigger are measured in both data and simulation. Then a corrective scale factor, defined as the ratio of data efficiency 
to simulation efficiency, is applied to the simulation. Scale factors are measured and applied in bins of \pT and $|\eta|$.

For the double electron trigger efficiency measurements, the tag electron must satisfy the following requirements. It must pass 
the single electron trigger, pass a tight cut-based identification, have \pT $> 30 \, (35)$ in 2016 (2017/2018), and have $|\eta| < 2.5$. 
The probe electron must pass the loose electron MVA identification (with isolation) requirement. The efficiencies for each leg 
of the trigger are measured separately, so in each case, the probe electron must match the trigger leg being measured. The efficiencies 
and scale factors of each double electron trigger leg for 2016, 2017, and 2018 are shown in Figures [FIGS]. 

For the double muon trigger efficiency measurements, the tag muon must satisfy the following requirements. It must pass the single 
muon trigger, pass a tight cut-based identification, have \pT $> 26 \, (29)$ GeV for 2016 (2017/2018) and satisfy $|\eta| < 2.4$. The 
probe muon must pass the $H \rightarrow ZZ$ identification and isolation cuts. The details of the $H \rightarrow ZZ$ muon 
identification will be described later. The efficiencies for each leg of the trigger are measured separately, so in each case, the probe 
muon must match the trigger leg being measured. The efficiencies and scale factors of each double muon trigger leg for 2016, 2017, 
and 2018 are shown in Figures [FIGS]. 

\section{Muon Selection}
A loose cut-based muon identification is used in the analysis. This identification was originally developed by the \hzz 
analysis [REF] and is well-suited for \hzg due to the similarity of the multiple, potentially soft, muons in the final state. 
All muons are first required to pass a set of common cuts, followed by a separate set of cuts for high \pT (greater than 200 GeV) 
and low \pT muons. All muons must satisfy \pT $>$ 5 GeV, $|\eta| < 2.4$, $|d_{xy}| < 0.5$ cm, and $|d_{z}| < 1$ cm, where $d_{xy}$ and 
$d_{z}$ are impact parameters defined with respect to the primary vertex of the interaction using the best muon track. 
Additionally, the three dimensional impact parameter (analogously defined) must have a magnitude less than four times its uncertainty.
Muons must either be reconstructed as global muons or tracker muons. Muons with standalone tracks (tracks only in the muon system) are
rejected. Muons must pass a particle flow-based isolation requirement, where the relative particle flow isolation 
within a $\Delta R = 0.3$ cone is defined as 
\begin{equation}
\label{eqn:pfiso}
	\mathcal{I} \equiv \Big( \sum p_{T}^\text{charged} + \max\big[ 0, \sum p_{T}^\text{neutral} +\sum p_{T}^{\gamma} - p_{T}^\mathrm{PU}(\ell) \big] \Big) / p_{T}^{\ell}.
\end{equation}
Muons must satisfy $\mathcal{I} < 0.35$. 

For muons with \pT $<$ 200 GeV, muons satisfying the common requirements and identified by the particle flow identification
algorithm are selected. For muons with \pT $>$ 200 GeV, muons are selected if they pass the particle flow identification or if they pass
a set of high-$p_{T}$ requirements. These requirements are the following: the muon must be matched to segments in at least two muon 
stations; satisfy $\frac{p_{T}}{\sigma_{p_{T}}} < 0.3$, $|d_{xy}| < 0.2$ cm, $|d_{z}| < 0.5$ cm, have at least one pixel hit, and have 
tracker hits in at least six tracker layers.

In 2016, data-taking was affected by a problem in which the level one trigger sent only one candidate per 60$^{\circ}$ sector instead 
of up to three [REF?]. As a result, when two muons in the same endcap had a low $\Delta \phi$ separation, only one would fire the 
trigger. To account for this, 2016 data events containing identified muons with $\Delta \phi < 70^{\circ}$ in the same endcap region 
are rejected. 

Identification efficiencies and scale factors corresponding to the muon identification above are measured and provided by the 
\hzz analysis working group, and are shown in Figure [FIG]. The momentum of each muon passing the identification requirements is 
corrected using the Rochester method and corrections [REF]. 



\section{Electron Selection}
Electrons are identified using a boosted decision tree multivariate (MVA) discriminator trained on Drell-Yan plus jets simulation 
with prompt electrons matched to generator-level objects as signal and unmatched and non-prompt electrons as background. The features 
used in the training include \pT, supercluster $\eta$, shower shape variables, ratio of hadronic to electromagnetic energy, track and 
pixel hit variables, and isolation variables [REF]. These features are sensitive to bremsstrahlung along the electron trajectory, 
momentum-energy matching between electron trajectory and ECAL cluster, shower shape, and electrons from photon conversions.
Since isolation features are included in the training of the discriminator, there is no need for separate isolation cuts. 
Electrons pass the identification requirement of the \hzg analysis if their discriminator score is higher than a loose working point 
value, corresponding to 98\% signal efficiency. In addition to the MVA cut, electrons must have $|d_{xy}| < 0.5$ cm and $|d_{z}| < 1$ cm
with respect to the primary vertex. Electrons with \pT $\leq$ 7 GeV are rejected. 

Electron identification efficiencies and scale factors are measured using a tag and probe method on dielectron events near the 
Z boson peak. These electrons must pass the single electron trigger with a \pT threshold of 27 (32) GeV for 2016 (2017/2018) data. 
The dielectron mass must be between 60 and 120 GeV. The tag electron must pass a tight cut-based electron identification and have 
\pT $>$ 30 (35) GeV for 2016 (2017) and $|\eta|$ < 2.5. The probe electron must pass the loose MVA identification cut and associated 
impact parameter and \pT cuts described above. Identification efficiencies and scale factors are measured and applied in bins of 
\pT and supercluster $\eta$. The scale factors for each data-taking year are shown in Figures [FIGS]. 

\section{Photon Selection}
